<main>
  <h1><%= Product.model_name.human(count: :many) %> </h1>
  <div style="display: flex; width: 100%; align-items: center; justify-content: center;">
    <%= render "search_form" %>
  </div>
  <div style="display: flex; align-items: center; flex-direction: row; width: 100%;">
    <div style="display: flex; flex-direction: column; width: 30%;">
      <%= render "filter_form" %>
    </div>
    <div>
      <%= link_to "New product", new_product_path %>
      <%= turbo_frame_tag "product_results", data: { turbo_action: "advance" } do %>
        <div id="products">
          <% @products.each do |product| %>
            <h1>
        <%= product.name %>
      </h1>
      <p>
        <strong> <%= t("updated_at") %> </strong>
        <%= l product.updated_at, format: :long %>
      </p>
      <div id="product-image-container">
      <% if product.image.attached? %>
        <div>
          <%= image_tag cdn_proxy_url(product.image.variant(:big)), loading: "lazy", alt: product.name, class:"product-image" %>
        </div>
      <% else %>
      <div class="no-photo-wrapper">
        <%= image_tag "default-product-image.jpg", class: "product-image default-image", loading: "lazy" %>
        <p class="no-photo"> <%= t :no_photo %> </p>
      </div>
      <% end %>
    </div>

            <p>
              <%= link_to "Show this product", product_path(product.slug), data: { turbo_frame: "_top" } %>
            </p>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</main>
